# Digital Twin Portfolio

A retro 90's-style portfolio website that acts as a conversational AI "digital twin" of the owner. Users can chat with an AI persona powered by Claude that responds as if they're talking to the real person, using information from a Google Doc knowledge base.

![Retro 90's Design](https://img.shields.io/badge/style-retro%2090's-brightgreen)
![TypeScript](https://img.shields.io/badge/TypeScript-5.0-blue)
![React](https://img.shields.io/badge/React-18.2-blue)
![Node.js](https://img.shields.io/badge/Node.js-20+-green)

## Features

- **Retro 90's UI**: Clean, nostalgic design inspired by early web aesthetics
- **AI-Powered Chat**: Powered by Claude (Sonnet 4.5) for natural conversations
- **Google Drive Integration**: Knowledge base sourced from Google Docs
- **Real-time Conversations**: Chat interface with typing indicators
- **Fully Typed**: TypeScript throughout for type safety
- **Future-Ready**: Structured for easy addition of authentication and payment features

## Tech Stack

### Frontend
- React 18 with TypeScript
- Tailwind CSS for styling
- Vite for build tooling
- Custom retro CSS themes

### Backend
- Node.js with Express
- TypeScript
- Anthropic Claude API
- Google Drive API
- CORS enabled for local development

## Project Structure

```
/
├── frontend/                 # React frontend application
│   ├── src/
│   │   ├── components/      # React components
│   │   │   ├── ChatInterface.tsx
│   │   │   ├── MessageBubble.tsx
│   │   │   └── Header.tsx
│   │   ├── styles/          # CSS styling
│   │   │   └── retro.css
│   │   ├── App.tsx
│   │   ├── api.ts           # API client
│   │   └── main.tsx
│   ├── package.json
│   └── tailwind.config.js
│
├── backend/                  # Express backend server
│   ├── src/
│   │   ├── server.ts        # Main server file
│   │   ├── routes/
│   │   │   └── chat.ts      # Chat API routes
│   │   ├── services/
│   │   │   ├── googleDrive.ts    # Google Drive integration
│   │   │   ├── claude.ts         # Claude AI integration
│   │   │   └── knowledgeBase.ts  # Knowledge management
│   │   └── config/
│   │       └── env.ts       # Environment config
│   ├── package.json
│   └── .env.example
│
└── README.md
```

## Setup Instructions

### Prerequisites

- Node.js 20+ installed
- npm or yarn package manager
- Anthropic API key ([Get one here](https://console.anthropic.com/))
- Google Cloud Project with Drive & Docs API enabled
- A Google Doc with your bio and resume information

### 1. Clone the Repository

```bash
cd your-project-directory
```

### 2. Set Up Google Drive API

#### Create Google Cloud Project

1. Go to [Google Cloud Console](https://console.cloud.google.com/)
2. Create a new project
3. Enable the Google Drive API and Google Docs API
4. Go to "Credentials" → "Create Credentials" → "OAuth 2.0 Client ID"
5. Configure OAuth consent screen
6. Create credentials (select "Web application")
7. Add authorized redirect URIs: `http://localhost:3001/auth/google/callback`
8. Save your Client ID and Client Secret

#### Get Refresh Token

The backend includes helper methods to get your refresh token. You'll need to:

1. Set up your `.env` file with Client ID and Secret (see step 4)
2. Run the backend server
3. Visit the OAuth URL generated by `GoogleDriveService.generateAuthUrl()`
4. Authorize the application
5. Exchange the code for a refresh token using `GoogleDriveService.getRefreshToken(code)`

Alternatively, you can use the [OAuth 2.0 Playground](https://developers.google.com/oauthplayground).

#### Prepare Your Google Doc

Create a Google Doc with the following format:

```
BIO:
[Your bio paragraph here. This should be a short introduction about yourself.]

RESUME:
[Your resume/CV content here. Include your work experience, education, skills, etc.]
```

Copy the document ID from the URL (it's the long string in the URL after `/d/`).

### 3. Set Up Anthropic API

1. Go to [Anthropic Console](https://console.anthropic.com/)
2. Create an account or sign in
3. Generate an API key
4. Save it for the next step

### 4. Configure Environment Variables

#### Backend Configuration

```bash
cd backend
cp .env.example .env
```

Edit `backend/.env` with your credentials:

```env
PORT=3001
NODE_ENV=development

# Anthropic Claude API
ANTHROPIC_API_KEY=your_anthropic_api_key_here

# Google Drive API
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret
GOOGLE_REDIRECT_URI=http://localhost:3001/auth/google/callback
GOOGLE_REFRESH_TOKEN=your_refresh_token_here

# Google Doc ID (from the URL)
GOOGLE_DOC_ID=your_google_doc_id_here

# CORS
FRONTEND_URL=http://localhost:3000
```

#### Frontend Configuration

```bash
cd frontend
cp .env.example .env
```

Edit `frontend/.env`:

```env
VITE_API_URL=http://localhost:3001
```

### 5. Install Dependencies

#### Backend

```bash
cd backend
npm install
```

#### Frontend

```bash
cd frontend
npm install
```

### 6. Run the Application

You'll need two terminal windows:

#### Terminal 1: Start Backend

```bash
cd backend
npm run dev
```

The backend will start on `http://localhost:3001`

#### Terminal 2: Start Frontend

```bash
cd frontend
npm run dev
```

The frontend will start on `http://localhost:3000`

### 7. Test the Application

1. Open your browser to `http://localhost:3000`
2. You should see the retro 90's chat interface
3. Type a message like "Tell me about yourself" or "What's your experience?"
4. The AI should respond using information from your Google Doc

## API Endpoints

### Chat Endpoint

**POST** `/api/chat`

Request body:
```json
{
  "message": "Tell me about yourself",
  "conversationHistory": [
    {
      "role": "user",
      "content": "Previous message"
    },
    {
      "role": "assistant",
      "content": "Previous response"
    }
  ]
}
```

Response:
```json
{
  "response": "I'm a software developer with..."
}
```

### Health Check

**GET** `/health`

Response:
```json
{
  "status": "ok",
  "timestamp": "2024-01-04T12:00:00.000Z",
  "environment": "development"
}
```

## Customization

### Change the UI Theme

Edit `frontend/tailwind.config.js` to customize colors:

```javascript
colors: {
  'retro-bg': '#c0c0c0',      // Background color
  'retro-dark': '#333333',    // Header/dark elements
  'retro-light': '#ffffff',   // Light backgrounds
  'retro-gray': '#808080',    // Gray accents
  'retro-blue': '#0000ff',    // Blue accent
  'retro-accent': '#00ff00',  // Green accent
}
```

### Modify the System Prompt

Edit `backend/src/services/knowledgeBase.ts` in the `buildSystemPrompt()` method to change how the AI responds.

### Update Knowledge Base Refresh Interval

In `backend/src/services/knowledgeBase.ts`, change the `updateInterval`:

```typescript
private updateInterval: number = 5 * 60 * 1000; // 5 minutes (in milliseconds)
```

## Deployment

### Frontend (Vercel/Netlify)

1. Build the frontend:
```bash
cd frontend
npm run build
```

2. Deploy the `dist` folder to Vercel or Netlify

3. Set environment variable:
   - `VITE_API_URL`: Your backend API URL

### Backend (Railway/Render/Heroku)

1. Push your backend code to a Git repository
2. Connect to your deployment platform
3. Set all environment variables from `.env.example`
4. Deploy

Make sure to update CORS settings in production:
```typescript
// backend/src/server.ts
app.use(cors({
  origin: 'https://your-frontend-domain.com',
  credentials: true,
}));
```

## Future Enhancements

The codebase is structured to easily add:

### Authentication
- JWT-based authentication
- User signup/login
- Protected routes
- Session management

Placeholder code is marked with `// FUTURE: Authentication`

### Payment Integration (Stripe)
- Subscription plans
- Credit system
- Payment webhooks
- Conversation limits

Placeholder code is marked with `// FUTURE: Payment`

### Additional Features
- Conversation history persistence
- Multiple knowledge base sources
- Voice input/output
- Mobile app version
- Analytics and insights

## Troubleshooting

### Backend won't start

- Verify all environment variables are set correctly
- Check that your Google refresh token is valid
- Ensure your Anthropic API key is active

### Frontend can't connect to backend

- Verify the backend is running on port 3001
- Check CORS settings
- Ensure `VITE_API_URL` is set correctly

### Google Drive API errors

- Verify your refresh token is valid
- Check that the Google Doc ID is correct
- Ensure the Google Doc is accessible with your credentials
- Verify Drive and Docs APIs are enabled in Google Cloud Console

### AI responses are incorrect

- Check your Google Doc format (should have BIO: and RESUME: sections)
- Verify the knowledge base is being loaded (check backend logs)
- Force refresh the knowledge base by restarting the backend

## Development

### Run Type Checking

Frontend:
```bash
cd frontend
npm run build  # Will run tsc
```

Backend:
```bash
cd backend
npm run build
```

### Run Linting

Frontend:
```bash
cd frontend
npm run lint
```

Backend:
```bash
cd backend
npm run lint
```

## License

MIT

## Contributing

Contributions welcome! Please open an issue or PR.

## Support

For issues and questions, please open a GitHub issue.

---

Built with ♥ using Claude AI, React, and Express
